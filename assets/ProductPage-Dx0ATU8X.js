import{c as _,b as F,u as C,r as o,j as e,L as S}from"./index-KWCbjcav.js";import{P as A}from"./ProductCard-iI0zbYzi.js";import{A as L}from"./arrow-left-CZQdhv-r.js";import{C as P}from"./circle-alert-Bt7Whk7E.js";import{P as z}from"./plus-VNbbz0_b.js";import"./FadeImage-D5sI62Vv.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M5 12h14",key:"1ays0h"}]],V=_("minus",E),D=()=>{var f;const{id:x}=F(),{addToCart:u,region:y,t:s,addRecentlyViewed:j,books:p}=C(),t=p.find(r=>r.id===x),[n,b]=o.useState(1),[i,h]=o.useState(null),[l,d]=o.useState(null),[a,g]=o.useState(null);if(o.useEffect(()=>{if(t&&(j(t),t.variants.length>0)){const r=t.variants[0];h(r.format),d(r.language),g(r)}},[t,x]),o.useEffect(()=>{if(t&&i&&l){const r=t.variants.find(c=>c.format===i&&c.language===l);g(r||null)}},[i,l,t]),!t)return e.jsx("div",{className:"pt-32 text-center font-mono uppercase",children:s("product.not_found")});const v=Array.from(new Set(t.variants.map(r=>r.format))),N=i?Array.from(new Set(t.variants.filter(r=>r.format===i).map(r=>r.language))):[],w=r=>{h(r);const c=Array.from(new Set(t.variants.filter(m=>m.format===r).map(m=>m.language)));l&&c.includes(l)||(c.length>0?d(c[0]):d(null))},k=()=>{a&&a.stock>0&&u(t,a,n)};return e.jsxs("div",{className:"bg-[#F4F4F0] min-h-screen pt-[60px] md:pt-[80px]",children:[e.jsxs("div",{className:"border-b border-primary px-4 py-2 flex justify-between items-center bg-white sticky top-[60px] md:top-[80px] z-20",children:[e.jsxs(S,{to:"/shop",className:"flex items-center gap-2 text-[10px] uppercase font-bold hover:text-accent",children:[e.jsx(L,{size:12})," ",s("cart.back_to_catalog")]}),e.jsx("span",{className:"font-mono text-[10px]",children:a?a.isbn:((f=t.variants[0])==null?void 0:f.isbn)||""})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 border-b border-primary",children:[e.jsxs("div",{className:"lg:border-r border-primary bg-[#E8EDF2] relative h-[60vh] lg:h-[calc(100vh-120px)] sticky top-[120px] lg:top-[120px] flex items-center justify-center p-8 lg:p-20 overflow-hidden",children:[e.jsx("div",{className:"relative w-full h-full shadow-[20px_20px_0px_0px_rgba(4,15,30,0.1)] border border-primary bg-white animate-fade-in",children:e.jsx("img",{src:t.coverUrl,alt:t.title,className:"w-full h-full object-cover grayscale contrast-110"})}),e.jsxs("div",{className:"absolute top-8 left-8 bg-primary text-white px-3 py-1 font-mono text-xs",children:["FIG. ",t.id]})]}),e.jsxs("div",{className:"bg-white flex flex-col min-h-[calc(100vh-120px)] border-t lg:border-t-0 border-primary",children:[e.jsxs("div",{className:"p-8 md:p-16 flex-1",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("span",{className:"block text-accent font-mono text-xs mb-4 uppercase tracking-widest",children:t.genre[0]}),e.jsx("h1",{className:"text-6xl md:text-8xl font-serif leading-[0.85] text-primary mb-6 -ml-1",children:t.title}),e.jsxs("p",{className:"text-xl md:text-2xl font-serif italic text-gray-500 border-l-2 border-accent pl-6",children:[s("product.by_author")," ",t.author]})]}),e.jsxs("div",{className:"grid grid-cols-2 border-y border-primary",children:[e.jsxs("div",{className:"border-r border-primary p-6",children:[e.jsx("span",{className:"block text-[10px] uppercase text-gray-400 mb-2",children:s("product.details.year")}),e.jsx("span",{className:"font-mono text-lg",children:t.details.year})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("span",{className:"block text-[10px] uppercase text-gray-400 mb-2",children:s("product.details.pages")}),e.jsx("span",{className:"font-mono text-lg",children:t.details.pages})]})]}),e.jsxs("div",{className:"py-8 border-b border-primary",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"block text-[10px] uppercase text-gray-400 mb-3 tracking-widest",children:s("product.format")}),e.jsx("div",{className:"flex flex-wrap gap-3",children:v.map(r=>e.jsx("button",{onClick:()=>w(r),className:`px-4 py-2 border font-mono text-xs uppercase transition-all ${i===r?"bg-primary text-white border-primary":"bg-white text-primary border-primary hover:bg-gray-100"}`,children:r},r))})]}),i&&e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-[10px] uppercase text-gray-400 mb-3 tracking-widest",children:s("product.language")}),e.jsx("div",{className:"flex flex-wrap gap-3",children:N.map(r=>e.jsx("button",{onClick:()=>d(r),className:`px-4 py-2 border font-mono text-xs uppercase transition-all ${l===r?"bg-primary text-white border-primary":"bg-white text-primary border-primary hover:bg-gray-100"}`,children:r},r))})]}),!a&&i&&e.jsxs("p",{className:"text-red-500 text-xs font-mono flex items-center gap-2 mt-4",children:[e.jsx(P,{size:12})," ",s("product.variant_unavailable")]})]}),e.jsx("div",{className:"py-12",children:e.jsx("p",{className:"text-lg leading-relaxed font-light text-justify",children:t.description})})]}),e.jsx("div",{className:"border-t border-primary bg-[#F4F4F0] p-6 md:p-8 sticky bottom-0 z-10 pb-[calc(1.5rem+env(safe-area-inset-bottom))]",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"font-mono text-xs uppercase",children:s("cart.total")}),e.jsxs("span",{className:"text-4xl font-serif",children:[a?a.price.toFixed(2):t.price.toFixed(2)," ",y.currency]})]}),e.jsxs("div",{className:"flex border border-primary bg-white h-14 md:h-14",children:[e.jsx("button",{onClick:()=>b(Math.max(1,n-1)),className:"w-14 border-r border-primary hover:bg-primary hover:text-white flex items-center justify-center transition-colors",children:e.jsx(V,{size:16})}),e.jsx("div",{className:"flex-1 flex items-center justify-center font-mono text-lg border-r border-primary",children:n}),e.jsx("button",{onClick:()=>b(n+1),className:"w-14 border-r border-primary hover:bg-primary hover:text-white flex items-center justify-center transition-colors",children:e.jsx(z,{size:16})}),e.jsx("button",{onClick:k,className:"flex-[2] bg-primary text-white hover:bg-accent transition-colors uppercase font-bold text-sm tracking-widest disabled:bg-gray-300 disabled:cursor-not-allowed",disabled:!a||a.stock===0,children:a?a.stock>0?s("product.add_to_cart"):s("product.out_of_stock"):s("product.select_variant")})]})]})})]})]}),e.jsxs("div",{className:"border-t border-primary",children:[e.jsx("div",{className:"p-4 border-b border-primary bg-accent text-primary",children:e.jsx("h3",{className:"font-mono text-xs uppercase tracking-widest",children:s("product.you_may_like")})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 border-b border-primary",children:p.filter(r=>r.genre[0]===t.genre[0]&&r.id!==t.id).slice(0,4).map(r=>e.jsx(A,{book:r},r.id))})]})]})};export{D as ProductPage};
