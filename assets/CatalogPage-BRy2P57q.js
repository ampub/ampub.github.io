import{c as $,u as W,a as Y,r as l,j as e,X as O}from"./index-KWCbjcav.js";import{P as Z}from"./ProductCard-iI0zbYzi.js";import{C as q}from"./chevron-down-70LjI3Ie.js";import{C as U}from"./check-EYe5jg_9.js";import{R as ee}from"./refresh-cw-B0A3EpxO.js";import"./FadeImage-D5sI62Vv.js";import"./circle-alert-Bt7Whk7E.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],te=$("funnel",re);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ae=$("layout-grid",se);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],le=$("list",ie),w=({title:s,children:N,isOpen:M=!0})=>e.jsxs("details",{className:"group border-b border-primary/20",open:M,children:[e.jsxs("summary",{className:"flex justify-between items-center py-4 cursor-pointer list-none outline-none group-focus:text-accent",children:[e.jsx("span",{className:"font-bold uppercase text-xs tracking-widest",children:s}),e.jsx("span",{className:"transition-transform group-open:rotate-180",children:e.jsx(q,{size:14})})]}),e.jsx("div",{className:"pb-6 animate-fade-in",children:N})]}),ne=()=>e.jsxs("div",{className:"border-r border-b border-primary h-full",children:[e.jsx("div",{className:"h-[300px] bg-gray-200 animate-pulse"}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 w-3/4 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 w-1/2 animate-pulse"}),e.jsx("div",{className:"h-8 bg-gray-200 w-full mt-4 animate-pulse"})]})]}),ue=()=>{const{t:s,books:N,genres:M,authors:G,region:ce}=W(),[a,v]=Y(),[H,k]=l.useState(!1),[_,A]=l.useState(!1),[x,L]=l.useState("grid"),[Q,I]=l.useState(!1),[C,E]=l.useState(""),[F,T]=l.useState(""),P=a.get("search"),S=a.getAll("genre"),m=a.getAll("author"),p=a.getAll("format"),f=a.get("sort")||"default",h=a.get("preorder")==="true",g=a.get("instock")==="true",c=a.get("minPrice")?Number(a.get("minPrice")):null,o=a.get("maxPrice")?Number(a.get("maxPrice")):null;l.useEffect(()=>{I(!0);const r=setTimeout(()=>I(!1),400);return()=>clearTimeout(r)},[a]),l.useEffect(()=>{E((c==null?void 0:c.toString())||""),T((o==null?void 0:o.toString())||"")},[c,o]);let n=N.filter(r=>{if(P){const t=P.toLowerCase(),d=r.title.toLowerCase().includes(t),y=r.author.toLowerCase().includes(t),i=r.variants.some(j=>j.isbn.toLowerCase().includes(t));if(!d&&!y&&!i)return!1}return!(S.length>0&&!r.genre.some(t=>S.includes(t))||m.length>0&&!m.includes(r.author)||p.length>0&&!r.variants.some(d=>p.includes(d.format))||h&&!r.isPreorder||g&&r.stock<=0||c!==null&&r.price<c||o!==null&&r.price>o)});n=n.sort((r,t)=>{switch(f){case"newest":return new Date(t.releaseDate).getTime()-new Date(r.releaseDate).getTime();case"price_asc":return r.price-t.price;case"price_desc":return t.price-r.price;case"alpha_asc":return r.title.localeCompare(t.title);default:const d=(r.badges.includes("new")?2:0)+(r.badges.includes("bestseller")?1:0);return(t.badges.includes("new")?2:0)+(t.badges.includes("bestseller")?1:0)-d}});const[V,D]=l.useState(12),b=n.slice(0,V),X=()=>D(r=>r+12),u=(r,t,d="toggle")=>{v(y=>{const i=new URLSearchParams(y);if(t===null)return i.delete(r),i;if(d==="set")i.set(r,t);else{const j=i.getAll(r);j.includes(t)?(i.delete(r),j.filter(z=>z!==t).forEach(z=>i.append(r,z))):i.append(r,t)}return i})},J=()=>{v(r=>{const t=new URLSearchParams(r);return C?t.set("minPrice",C):t.delete("minPrice"),F?t.set("maxPrice",F):t.delete("maxPrice"),t})},R=()=>{v({}),D(12)},B=["default","newest","price_asc","price_desc","alpha_asc"],K=["hardcover","paperback","digital","special_edition"];return e.jsxs("div",{className:"bg-[#F4F4F0] min-h-screen pt-[60px] md:pt-[80px]",children:[e.jsxs("div",{className:"border-b border-primary p-6 md:p-12 bg-white flex flex-col md:flex-row justify-between items-end gap-6 relative z-20",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-[10px] uppercase tracking-widest text-gray-400 block mb-2",children:"Archive / Inventory"}),e.jsx("h1",{className:"text-5xl md:text-8xl font-serif uppercase leading-[0.9] text-primary break-words",children:s(P?"catalog.title_search":"catalog.title_all")}),e.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[e.jsxs("span",{className:"font-mono text-xs bg-primary text-white px-2 py-1",children:[n.length," ITEMS"]}),(S.length>0||m.length>0||c||o)&&e.jsx("button",{onClick:R,className:"text-xs uppercase underline text-red-500 hover:no-underline",children:s("catalog.filters.clear_all")})]})]}),e.jsxs("div",{className:"flex gap-4 hidden md:flex",children:[e.jsxs("div",{className:"flex border border-primary bg-white",children:[e.jsx("button",{onClick:()=>L("grid"),className:`p-3 transition-colors ${x==="grid"?"bg-primary text-white":"text-primary hover:bg-gray-100"}`,title:s("catalog.view_grid"),children:e.jsx(ae,{size:16})}),e.jsx("div",{className:"w-[1px] bg-primary"}),e.jsx("button",{onClick:()=>L("list"),className:`p-3 transition-colors ${x==="list"?"bg-primary text-white":"text-primary hover:bg-gray-100"}`,title:s("catalog.view_list"),children:e.jsx(le,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>A(!_),className:"flex items-center gap-4 font-mono text-xs uppercase tracking-widest border border-primary px-6 py-3 hover:bg-primary hover:text-white transition-colors bg-white min-w-[220px] justify-between h-full",children:[e.jsxs("span",{children:[s("catalog.sort_by"),": ",e.jsx("span",{className:"font-bold ml-1",children:s(`catalog.sort_options.${f}`)})]}),e.jsx(q,{size:14,className:`transition-transform ${_?"rotate-180":""}`})]}),_&&e.jsx("div",{className:"absolute right-0 top-full mt-[-1px] w-full bg-white border border-primary shadow-xl z-20 animate-fade-in",children:B.map(r=>e.jsx("button",{onClick:()=>{u("sort",r,"set"),A(!1)},className:`block w-full text-left px-6 py-3 font-mono text-xs uppercase hover:bg-bg transition-colors ${f===r?"bg-primary text-white hover:bg-primary hover:text-white":""}`,children:s(`catalog.sort_options.${r}`)},r))})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row border-b border-primary min-h-screen relative",children:[e.jsx("aside",{className:"hidden md:block w-[300px] xl:w-[360px] border-r border-primary bg-[#F4F4F0] flex-shrink-0 relative z-10",children:e.jsxs("div",{className:"sticky top-[80px] h-[calc(100vh-80px)] overflow-y-auto custom-scrollbar p-8",children:[e.jsxs(w,{title:s("catalog.filters.price_range"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("input",{type:"number",placeholder:"Min",value:C,onChange:r=>E(r.target.value),className:"w-full bg-white border border-primary p-2 text-sm font-mono focus:bg-accent/10 outline-none"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max",value:F,onChange:r=>T(r.target.value),className:"w-full bg-white border border-primary p-2 text-sm font-mono focus:bg-accent/10 outline-none"})]}),e.jsx("button",{onClick:J,className:"w-full bg-primary text-white py-2 text-[10px] uppercase font-bold tracking-widest hover:bg-accent transition-colors",children:"Apply"})]}),e.jsxs(w,{title:s("catalog.filters.availability"),children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group mb-2",children:[e.jsx("div",{className:`w-4 h-4 border border-primary flex items-center justify-center transition-colors ${g?"bg-primary":"bg-white"}`,children:g&&e.jsx(U,{size:10,className:"text-white"})}),e.jsx("span",{className:"text-sm font-mono uppercase text-gray-600 group-hover:text-primary",children:s("catalog.filters.in_stock")}),e.jsx("input",{type:"checkbox",className:"hidden",checked:g,onChange:()=>u("instock",g?"false":"true","set")})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 border border-primary flex items-center justify-center transition-colors ${h?"bg-primary":"bg-white"}`,children:h&&e.jsx(U,{size:10,className:"text-white"})}),e.jsx("span",{className:"text-sm font-mono uppercase text-gray-600 group-hover:text-primary",children:s("nav.preorder")}),e.jsx("input",{type:"checkbox",className:"hidden",checked:h,onChange:()=>u("preorder",h?"false":"true","set")})]})]}),e.jsx(w,{title:s("catalog.filters.format"),children:e.jsx("div",{className:"flex flex-col gap-2",children:K.map(r=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 border border-primary flex items-center justify-center transition-colors ${p.includes(r)?"bg-primary":"bg-transparent"}`,children:p.includes(r)&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-none"})}),e.jsx("span",{className:`text-sm font-mono uppercase ${p.includes(r)?"text-primary font-bold":"text-gray-500 group-hover:text-primary"}`,children:r.replace("_"," ")}),e.jsx("input",{type:"checkbox",className:"hidden",checked:p.includes(r),onChange:()=>u("format",r)})]},r))})}),e.jsx(w,{title:s("catalog.filters.authors"),children:e.jsx("div",{className:"flex flex-col gap-2",children:G.map(r=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 border border-primary flex items-center justify-center transition-colors ${m.includes(r)?"bg-primary":"bg-transparent"}`,children:m.includes(r)&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-none"})}),e.jsx("span",{className:`text-sm font-serif ${m.includes(r)?"text-primary font-bold italic":"text-gray-500 group-hover:text-primary"}`,children:r})]},r))})})]})}),e.jsxs("div",{className:"md:hidden border-b border-primary p-4 sticky top-[60px] bg-white z-30 flex justify-between items-center shadow-md",children:[e.jsxs("span",{className:"font-mono text-xs font-bold",children:[n.length," RESULTS"]}),e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 text-xs uppercase font-bold border border-primary px-4 py-3 bg-primary text-white",children:[s("catalog.filters.title")," ",e.jsx(te,{size:14})]})]}),e.jsx("div",{className:"flex-1 bg-white",children:Q?e.jsx("div",{className:`${x==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3":"flex flex-col"}`,children:Array.from({length:6}).map((r,t)=>e.jsx(ne,{},t))}):b.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${x==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3":"flex flex-col"}`,children:b.map(r=>e.jsx(Z,{book:r,viewMode:x},r.id))}),n.length>b.length&&e.jsx("div",{className:"p-12 border-t border-primary flex justify-center bg-[#F4F4F0]",children:e.jsxs("button",{onClick:X,className:"flex items-center gap-3 border border-primary px-8 py-4 uppercase font-bold text-xs tracking-[0.2em] hover:bg-primary hover:text-white transition-all group",children:[e.jsx(ee,{size:14,className:"group-hover:rotate-180 transition-transform duration-500"}),"Load More (",n.length-b.length,")"]})})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-20 text-center font-mono uppercase text-gray-400",children:[e.jsx("div",{className:"w-20 h-20 border border-gray-200 flex items-center justify-center rounded-full mb-6",children:e.jsx(O,{size:32,className:"opacity-50"})}),e.jsx("p",{className:"mb-4",children:s("catalog.filters.no_results")}),e.jsx("button",{onClick:R,className:"text-xs underline hover:text-primary text-primary",children:s("catalog.filters.try_adjusting")})]})})]}),H&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-[#F4F4F0] flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-primary bg-white",children:[e.jsx("h2",{className:"text-3xl font-serif",children:s("catalog.filters.title")}),e.jsx("button",{onClick:()=>k(!1),className:"p-2 border border-transparent hover:border-primary",children:e.jsx(O,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-4 uppercase border-b border-primary/20 pb-2",children:s("catalog.sort_by")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(r=>e.jsx("button",{onClick:()=>u("sort",r,"set"),className:`px-4 py-2 border text-xs font-mono uppercase ${f===r?"bg-primary text-white border-primary":"bg-white border-gray-300"}`,children:s(`catalog.sort_options.${r}`)},r))})]})}),e.jsx("div",{className:"p-6 border-t border-primary bg-white",children:e.jsx("button",{onClick:()=>k(!1),className:"w-full bg-primary text-white py-5 uppercase font-bold tracking-widest text-lg shadow-lg",children:s("catalog.filters.view_results",{count:n.length})})})]})]})};export{ue as CatalogPage};
